class WordsGrowFade implements Scene
{   
  //String message = "Methodology can also be applied to a sketch where characters from a String move independently of one another. The following WordsGrowFade uses object-oriented design to make each character from the original String a Letter object, allowing it to both be a displayed in its proper location as well as move about the screen individually. Methodology can also be applied to a sketch where characters from a String move independently of one another. The following WordsGrowFade uses object-oriented design to make each character from the original String a Letter object, allowing it to both be a displayed in its proper location as well as move about the screen individually. Methodology can also be applied to a sketch where characters from a String move independently of one another. The following WordsGrowFade uses object-oriented design to make each character from the original String a Letter object, allowing it to both be a displayed in its proper location as well as move about the screen individually. Methodology can also be applied to a sketch where characters from a String move independently of one another. The following WordsGrowFade uses object-oriented design to make each character from the original String a Letter object, allowing it to both be a displayed in its proper location as well as move about the screen individually. Methodology can also be applied to a sketch where characters from a String move independently of one another. The following WordsGrowFade uses object-oriented design to make each character from the original String a Letter object, allowing it to both be a displayed in its proper location as well as move about the screen individually. Methodology can also be applied to a sketch where characters from a String move independently of one another. The following WordsGrowFade uses object-oriented design to make each character from the original String a Letter object, allowing it to both be a displayed in its proper location as well as move about the screen individually. Methodology can also be applied to a sketch where characters from a String move independently of one another. The following WordsGrowFade uses object-oriented design to make each character from the original String a Letter object, allowing it to both be a displayed in its proper location as well as move about the screen individually. Methodology can also be applied to a sketch where characters from a String move independently of one another. The following WordsGrowFade uses object-oriented design to make each character from the original String a Letter object, allowing it to both be a displayed in its proper location as well as move about the screen individually. Methodology can also be applied to a sketch where characters from a String move independently of one another. The following WordsGrowFade uses object-oriented design to make each character from the original String a Letter object, allowing it to both be a displayed in its proper location as well as move about the screen individually. Methodology can also be applied to a sketch where characters from a String move independently of one another. The following WordsGrowFade uses object-oriented design to make each character from the original String a Letter object, allowing it to both be a displayed in its proper location as well as move about the screen individually. Methodology can also be applied to a sketch where characters from a String move independently of one another. The following WordsGrowFade uses object-oriented design to make each character from the original String a Letter object, allowing it to both be a displayed in its proper location as well as move about the screen individually. Methodology can also be applied to a sketch where characters from a String move independently of one another. The following WordsGrowFade uses object-oriented design to make each character from the original String a Letter object, allowing it to both be a displayed in its proper location as well as move about the screen individually. ";
  String txt = "El   hombre*  comunica*   su   propia  esencia*  espiritual*  (en  la  medida*  en  que  es  comunicable) nombrando* todas las otras cosas* . Pero ¿ conocemos* otras lenguas* que nombran las cosas* ? No se objete que no conocemos* otra lengua fuera de la del hombre: no es cierto* . En realidad* , no conocemos ninguna* lengua denominante* fuera de la del hombre* ; al identificar* lengua* denominante* con lengua en general, la teoría* lingüística* se priva de sus nociones* más profundas* . La esencia* lingüística* del hombre es por lo tanto nombrar* las cosas* . ¿Por qué las nombra? ¿Con quién se comunica* el hombre* ? -¿Es acaso este problema* en el caso del hombre* distinto que en otras comunicaciones (lenguas)? ¿Con quién* se comunica* la lámpara? ¿Y la montaña* ? ¿Y el zorro?- Pero aquí* la respuesta* dice* : con el hombre. Ello no es en absoluto* antropomorfismo* . La verdad* de esta respuesta* se revela* en el conocimiento* y quizás* también en el arte* … Es necesario establecer una diferencia* profunda* , una alternativa* frente a la cual se desenmascare inevitablemente la concepción* esencialmente falsa* de la lengua… Esta concepción* es la concepción burguesa* de la lengua* , cuya vacua* inconsistencia* resultará enseguida más clara. Tal teoría* dice que el medio de la comunicación es la palabra* , que su objeto* es la cosa* y que su destinatario es un hombre* . Mientras que la otra teoría* no* distingue* ningún medio* , ningún objeto* , ningún destinatario de la comunicación. Dice: en el nombre el ser* espiritual* del hombre se comunica* con Dios* … Toda naturaleza* , en cuanto se comunica* , se comunica en la lengua* , y por lo tanto en última* instancia en el hombre* . Por ello el hombre es el señor de la naturaleza* y puede* nombrar las* cosas* . Sólo a través de la esencia* lingüística* de las cosas llega el hombre desde sí* mismo* al conocimiento* de éstas: en el nombre. La creación* de Dios* se completa* cuando las cosas reciben su* nombre* del hombre, de quien en el nombre habla* sólo la lengua* … En la designación* del hombre como parlante* (que es, según la Biblia, el dador de nombres: \"toda denominación que el hombre pusiera a los seres* vivientes, tal fuese su nombre\") muchas lenguas encierran* en sí este conocimiento* metafísico. Pero el* nombre* no es sólo la última exclamación* , sino también la verdadera* alocución* de la lengua. Aparece* así en el nombre la ley* esencial* de la lengua, para la cual expresarse* y apostrofar toda otra* cosa* es un mismo movimiento* . La lengua –y en ella* un ser* espiritual* - se expresa* puramente sólo cuando* habla* en el nombre, es decir en la denominación universal* . Culmina así* en el nombre la totalidad* intensiva* de la lengua como del ser* espiritual* absolutamente comunicable* , y la totalidad* extensiva* de la lengua como de ser universalmente comunicante (denominante). La lengua es imperfecta* en su esencia* comunicante, en su universalidad, cuando el ser espiritual que ella habla no es lingüístico, es decir, comunicable* , en toda su estructura. Sólo el hombre tiene la lengua perfecta* en universalidad e intensidad.(...) W. Benjamin";
  String txt2 ="Hölderlin dice en un esbozo de himno: Un signo somos, sin interpretación, sin dolor estamos nosotros y casi hemos perdido la lengua en lo extraño. Los esbozos del himno, junto con títulos como «La serpiente», «La ninfa», «El signo», llevan también el título de «Mnemosyne». Esta palabra griega la podemos traducir a esta palabra alemana nuestra: Gedächtnis (memoria). Nuestra lengua dice: das Gedächtnis. Pero dice también: die Erkenritnis (el conocimiento), dice die Befugnis (la autorización) y, de nuevo, das Begräbnis (el entierro), das Geschehnis (el acontecimiento). Kant, en su lenguaje, dice tanto die Erkentnis (en femenino) como das Erkentnis (en neutro), y a menudo un término está muy cerca del otro. De ahí que nosotros, sin violentar la palabra, en correspondencia con el femenino griego podamos traducir Mnhmosænh por: die Gedächtnis, «la memoria». Y es que en Hölderlin la palabra griega Mnhmosænh es el nombre de una titánida. Es la hija del cielo y de la tierra. Mnemosyne, como amada de Zeus, en nueve noches se convierte en la madre de las musas. El juego y la danza, el canto y el poema, pertenecen al seno de Mnemosyne, a la memoria. Es evidente que esta palabra es aquí el nombre de algo más que aquella facultad de la que habla la Psicología, la facultad de guardar lo pasado en la representación. La palabra memoria piensa en lo pensado. Pero el nombre de la madre de las musas no quiere decir «memoria» como un pensamiento cualquiera, referido a cualquier cosa pensable. Memoria aquí es la coligación del pensar que permanece reunido en vistas a aquello que de antemano ya está pensado porque quiere siempre ser tomado en consideración antes que cualquier otra cosa. Memoria es la coligación de la conmemoración de aquello-que-hay-que-tomar-en-consideración antes que todo lo demás. Esta coligación alberga cabe sí y oculta en sí aquello en lo que hay que pensar siempre de antemano; en relación con todo aquello que esencia y se exhorta como esenciando y habiendo esenciado. Memoria, como coligada conmemoración de lo que está por-pensar, es la fuente del poetizar. Según esto la esencia de la poesía descansa en el pensar. Esto es lo que nos dice el mito, es decir, la leyenda. Su decir se llama lo más antiguo, no sólo porque, según el cómputo del tiempo, es el primero sino porque, por su esencia, es, desde siempre y para siempre, lo más digno de ser pensado. No hay duda, mientras nos representemos el pensar según las informaciones que sobre él nos da la Lógica, mientras no tomemos en serio que la Lógica se ha fijado ya en un determinado modo del pensar, mientras ocurra esto, no podremos reparar en que el poetizar descansa en la conmemoración; ni podremos darnos cuenta nunca de hasta qué punto esto es así.Todo lo poetizado ha surgido de la atención fervorosa de la conmemoración. Bajo el título de «Mnemosyne» dice Hölderlin: «Un signo somos nosotros, sin interpretación...» ¿Quiénes son «nosotros»? Nosotros los hombres de hoy, los hombres de un hoy que hace tiempo que dura y que durará todavía mucho tiempo, en una duración para la que jamás ningún cómputo temporal de la historia podrá aportar medida alguna. En el mismo himno «Mnemosyne» se dice: «Largo es / el tiempo»; es decir, aquel en el que nosotros somos un signo sin interpretación. ¿No da bastante que pensar esto de que seamos un signo, y concretamente un signo sin interpretación? Quizás lo que Hölderlin dice en estas y en las siguientes palabras pertenece a aquello en lo que se nos muestra lo preocupante, al hecho de que todavía no pensemos. Pero el hecho de que todavía no pensemos, ¿descansa en el hecho de que seamos un signo sin interpretación y estemos sin dolor, o bien somos un signo sin interpretación y estamos sin dolor en la medida en que todavía no pensamos? Si fuera esto último, entonces el pensamiento sería aquello por medio de lo cual, y sólo por medio de lo cual, se les regalaría a los mortales el dolor y se le daría una interpretación al signo que los mortales son. Entonces un pensar así empezaría por trasladarnos a una interlocución con el poetizar del poeta, un poetizar cuyo decir, como ningún otro, busca su eco en el pensar. Si nos atrevemos a ir a buscar la palabra poética de Hölderlin y a llevarla a la región del pensar, entonces, sin duda alguna, debemos guardarnos de equiparar de un modo irreflexivo lo que Hölderlin dice poéticamente con aquello que nosotros nos disponemos a pensar. Lo dicho poetizando y lo dicho pensando no son nunca lo mismo. Pero lo uno y lo otro pueden, de distintas maneras, decir lo mismo. Pero esto sólo se consigue si se abre de un modo claro y decidido el abismo que hay entre poetizar y pensar. Esto ocurre siempre que el poetizar es alto y el pensar es profundo. También esto lo sabía Hölderlin. Tomamos su saber de las dos estrofas que llevan por título: Sócrates y Alcibíades «¿Por qué, Sócrates santo, estás agasajando a este muchacho siempre? ¿Nada más grande conoces? ¿Por qué con amor, como a dioses, lo miran tus ojos? La respuesta la da la segunda estrofa. «Quien pensó lo más profundo, éste ama lo más vivo; excelsa juventud comprende quien el mundo miró y los sabios se inclinan a menudo, al fin, hacia lo bello.» …Ser quiere decir estar presente. Este rasgo fundamental del ser, que se dice pronto, el estar presente, se hace sin embargo misterioso en el momento en que despertamos y consideramos adónde aquello que nosotros llamamos presencia remite nuestro pensar. Lo presente es lo que mora y perdura, y que esencia en dirección al desocultamiento y dentro de él. El estar presente acaece de un modo propio sólo donde prevalece ya el estado-de-desocultamiento. Pero lo presente, en tanto que mora y perdura entrando en el estado-de-desocultamiento, es presente. De ahí que al estar presente no sólo le pertenezca el estado-de-desocultamiento sino el presente. Este presente que prevalece en el estar presente es un carácter del tiempo. Pero la esencia de éste no se deja nunca aprehender por medio del concepto de tiempo heredado de la tradición. En el ser, que ha aparecido como estar presente queda, sin embargo, no pensado el estado-de-desocultamiento que allí prevalece, del mismo modo como la esencia de presente y tiempo que prevalece allí. Presumiblemente, estado de desocultamiento y presente, como esencia del tiempo, se pertenecen el uno al otro. En la medida en que percibimos el ente en su ser, en la medida en que -para decirlo en el lenguaje moderno- representamos los objetos en su objetualidad, estamos ya pensando. De esta manera estamos pensando ya desde hace tiempo. Sin embargo, a pesar de esto, todavía no estamos pensando de un modo propio mientras quede sin pensar dónde descansa el ser del ente cuando aparece como presencia. El provenir esencial del ser del ente no está pensado. Lo que propiamente está por pensar queda reservado. Todavía no se ha convertido en digno de ser pensado por nosotros. Por esto nuestro pensar aún no ha llegado propiamente a su elemento. Todavía no pensamos de un modo propio. Por esto nos preguntamos: ¿qué quiere decir pensar?";

  PFont f;
  Word[] words;
  int h = 22;
  FloatList middles;
  boolean isOne;

  color backColor;
  color fontColor;
  float overlayAlpha;

  PGraphics pg;
  float growFactor;

  public WordsGrowFade(){};

  void closeScene(){};

  void initialScene(){
    colorMode(RGB);
    f = createFont("Arial",h,true);
    textFont(f);
    isOne =true;
    initWords();

    backColor = color(255);
    fontColor = color(0);
    growFactor = 0.6;
    overlayAlpha = 255;

    middles = new FloatList();
    pg = createGraphics(width, height);
    strokeWeight(1);

  };

  void drawScene(){
    pg.beginDraw();  
    pg.background(backColor);

    IntList willGrow = new IntList();

    getDancers();
    middles = dancers.getAllMiddles();
    for (int i = 0; i < words.length; i++) {
      boolean grow = false;
      for(int j = 0; j< middles.size();j++){
        float middle_x = middles.get(j);
        if ((middle_x + 15 > words[i].homex)&&(middle_x - 15 < words[i].homex)) {
          grow = true;
        }  
      }
      if(grow) {
        // if this word is in grow range, we check if it should grow
        if(words[i].growIfYouCan()) willGrow.append(i);
      }
      else {
        if(words[i].home()) willGrow.append(i);
      }
      words[i].display();
    }
    // now we add fade-layer
    pg.fill(backColor, overlayAlpha);
    pg.noStroke();
    pg.rect(0,0,width,height);
    // now we draw one more time growed words
    for (int i = willGrow.size()-1; i >= 0; i--) {
      int idx = willGrow.get(i);
      words[idx].display();
    }
    pg.endDraw();
    image(pg, 0, 0);

    drawLine();
  };

  String getSceneName(){return "WordsGrowFade";};
  void onPressedKey(String k){
    if (k == "toggle") {
      isOne = !isOne;
      initWords();
    }

    if (k == "weight"){
      h+=1;
      println("h "+h);
      initWords();
    } 
    if (k == "quit"){
      h=max(h-1,1);
      initWords();
    } 

    if (k == "UP") this.overlayAlpha = min(this.overlayAlpha+2,255);
    if (k == "DOWN") this.overlayAlpha = max(this.overlayAlpha-2, 0);

    if (k == "RIGHT") this.growFactor = this.growFactor+0.1;
    if (k == "LEFT") this.growFactor = max(this.growFactor-0.1, 0);
  };

  void onImg(PImage img){};

  void initWords(){
    f = createFont("rimouski sb.ttf",h,true);
    textFont(f,h);

    String message;
    if(isOne) message =txt;
    else message =txt2;

    String[] splittedMsg = message.split(" ");

    words = new Word[splittedMsg.length];

    int x = 16;
    int y = h;
    for (int i = 0; i < splittedMsg.length; i++) {
      boolean canGrow = false;
      String s = splittedMsg[i];
      String w = splittedMsg[i]+" ";
      if(s.length()>0){
        if(w.charAt( s.length()-1) == '*') {
          canGrow = true;
          w = s.substring(0, s.length()-1)+" "; 
        }      
      }

      if(x+textWidth(w) > 1024) {
        x =16;
        y+=h;
      }
      words[i] = new Word(x+textWidth(w)/2,y,h,w,canGrow); 
      x += textWidth(w);
    }
  }

  // A class to describe a single Letter
  class Word {
    String word;
    // The object knows its original "home" location
    float homex,homey,homeh;
    boolean canGrow;

    // As well as its current location
    float x,y;
    float fontSize;

    Word (float x_, float y_, float homeh_, String word_, boolean canGrow_) {
      homex = x = x_;
      homey = y = y_;
      word = word_; 
      canGrow = canGrow_;
      homeh = fontSize = homeh_;
    }

    // Display the word
    void display() {
      pg.fill(fontColor);
      pg.textFont(f,fontSize);

      pg.textAlign(CENTER);
      pg.text(word,x,y);
    }

    // Return to original size
    boolean home() {
      if(fontSize!=homeh) {
        fontSize=max(homeh, fontSize-growFactor);
        return true;
      }
      return false;
    }

    boolean growIfYouCan(){
      if(canGrow) {
       // fontSize= min(fontSize+1,60);
        textFont(f,fontSize);
        float xWordStart = x - textWidth(word)/2 ;
        float xWordEnd = x + textWidth(word)/2;
        float  topWord = y - fontSize;
        //if(!(xWordStart < 2 || xWordEnd > width-2 || topWord < 2)) fontSize= min(fontSize+growFactor,60);
        if(!(xWordStart < 2 || xWordEnd > width-2 || topWord < 2)) fontSize= fontSize+growFactor;
        return true;
      }
      return false;
    }
  }
}


